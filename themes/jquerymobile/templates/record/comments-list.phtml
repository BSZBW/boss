<? $comments = $this->driver->getComments(); if (empty($comments) || count($comments) == 0): ?>
  <li><p><?=$this->transEsc('Be the first to leave a comment')?>!</p></li>
<? endif; ?>
<? foreach ($comments as $comment): ?>
  <li>
    <a href="#">
      <p><?=$this->escape($comment->comment)?></p>
      <p class="posted-by"><?=$this->transEsc('Posted by')?> <strong><?=$this->escape(trim($comment->firstname . ' ' . $comment->lastname))?></strong></p>
      <span class="ui-li-aside"><?=$this->escape(array_shift(explode(' ', $comment->created)))?></span>
    </a>
    <? if (($user = VF_Account_Manager::getInstance()->isLoggedIn()) && $comment->user_id == $user->id): ?>
      <a rel="external" href="<?=$this->recordLink()->getUrl($this->driver, 'DeleteComment')?>?delete=<?=urlencode($comment->id)?>" data-comment-id="<?=$this->escape($comment->id)?>" class="deleteRecordComment">
        <?=$this->transEsc('Delete')?>
      </a>
    <? endif; ?>
  </li>
<? endforeach; ?>
